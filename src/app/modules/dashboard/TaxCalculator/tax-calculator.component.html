
      <!-- Calculation Mode Tabs -->
      <div class="bg-white shadow p-4 rounded-xl flex justify-center space-x-4 mb-6 sticky top-0 z-10">
        <button
          (click)="calculationMode='byTitle'"
          [ngClass]="calculationMode==='byTitle' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
          class="px-4 py-2 rounded-xl font-semibold transition"
        >
          By Role Title
        </button>

        <button
          (click)="calculationMode='byCategory'"
          [ngClass]="calculationMode==='byCategory' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
          class="px-4 py-2 rounded-xl font-semibold transition"
        >
          By Tax Category
        </button>

        <button
          (click)="calculationMode='byEntity'"
          [ngClass]="calculationMode==='byEntity' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'"
          class="px-4 py-2 rounded-xl font-semibold transition"
        >
          By Entity / Business
        </button>
      </div>

      <!-- Calculator Card -->
      <div class="bg-white shadow-2xl rounded-3xl p-10 w-full max-w-3xl mx-auto">
        <!-- Title -->
        <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-8 text-center">
          ðŸ‡³ðŸ‡¬ Nigeria 2026 Tax Calculator
        </h2>
    
        <!-- By Role Title Form -->
        <form *ngIf="calculationMode==='byTitle'" [formGroup]="titleForm" (ngSubmit)="onCalculate()" class="grid grid-cols-1 gap-6">

        <!-- Role select -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Role Title</label>
            <select formControlName="role"
            class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none">
            <option value="" disabled selected>Select a role</option>
            <option *ngFor="let role of Roles" [value]="role.title">{{ role.title }}</option>
            </select>
        </div>

        <!-- Income input -->
        <div>
            <label class="block text-gray-700 font-medium mb-2">Annual Income / Turnover (â‚¦)</label>
            <input  type="text"
              [value]="formattedIncome"
              (input)="onIncomeInput($event)"
              (blur)="formatIncome()" placeholder="Enter income"
            class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
        </div>

        <!-- Submit button -->
        <button type="submit"
            class="w-full bg-blue-600 text-white font-semibold py-3 rounded-xl hover:bg-blue-700 transition duration-300">
            Calculate Tax
        </button>
        </form>


        <!-- By Tax Category Form -->
        <form *ngIf="calculationMode==='byCategory'" [formGroup]="categoryForm" (ngSubmit)="calculateByCategory()" class="grid grid-cols-1 gap-6">
          <div>
            <label class="block text-gray-700 font-medium mb-2">Tax Category</label>
            <select formControlName="category"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none">
              <option *ngFor="let c of allTaxCategories" [value]="c">{{ c }}</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 font-medium mb-2">Income / Turnover (â‚¦)</label>
            <input type="number" formControlName="income" placeholder="Enter income or turnover"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          </div>
          <button type="submit"
            class="w-full bg-blue-600 text-white font-semibold py-3 rounded-xl hover:bg-blue-700 transition duration-300">
            Calculate Tax
          </button>
        </form>

        <!-- By Entity Form -->
        <form *ngIf="calculationMode==='byEntity'" [formGroup]="taxForm" (ngSubmit)="calculateTax()" class="grid grid-cols-1 gap-6">
          <div>
            <label class="block text-gray-700 font-medium mb-2">Entity Type</label>
            <select formControlName="entityType"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none">
              <option value="Individuals">Individuals</option>
              <option value="Businesses">Businesses</option>
            </select>
          </div>

          <div>
            <label class="block text-gray-700 font-medium mb-2">Category</label>
            <select formControlName="category"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none">
              <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
            </select>
          </div>

          <div>
            <label class="block text-gray-700 font-medium mb-2">Role</label>
            <select formControlName="role"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none">
              <option *ngFor="let r of roles" [value]="r">{{ r }}</option>
            </select>
          </div>

          <div>
            <label class="block text-gray-700 font-medium mb-2">Income / Turnover (â‚¦)</label>
            <input type="number" formControlName="income" placeholder="Enter your income"
              class="w-full border border-gray-300 rounded-xl px-5 py-3 focus:ring-2 focus:ring-blue-500 focus:outline-none" />
          </div>

          <button type="submit"
            class="w-full bg-blue-600 text-white font-semibold py-3 rounded-xl hover:bg-blue-700 transition duration-300">
            Calculate Tax
          </button>
        </form>

        <!-- Tax Result -->
        <div *ngIf="taxResult()" class="mt-10 text-center">
          <h3 class="text-xl md:text-2xl font-semibold text-gray-700 mb-2">Estimated Tax to Pay:</h3>
          <p class="text-4xl md:text-5xl font-extrabold text-green-600">â‚¦{{ taxResult() | number }}</p>
        </div>
      </div>


      <!-- Modal -->
<app-success-modal
  [show]="showModal"
  [title]="modalTitle"
  [message]="modalMessage"
  [data]="modalData"
  [type]="modalType"
  (closed)="showModal = false"
/>

